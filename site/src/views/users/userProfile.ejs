<!DOCTYPE html>
<html lang="es">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <%- include('../partials/head')  %>
    <title>userProfile</title>
</head>
<body>
    <%- include('../partials/header')  %> 
    <!-- ///////////////// -->
<main class="profile">
    <!-- Detalles del perfil -->

    <h1>Mi cuenta</h1>

    <section class="profile-section user-dashboard page-wrapper">
        <div class="container">
          <h4>Detalles de perfil</h4>
          <div class="row">
            <div class="col-md-12">
                
              
              <div class="dashboard-wrapper dashboard-user-profile">
                <div class="media">
                  
                  <div class=" image-container pull-left text-center" href="#!">
                    <img class="media-object user-img" src="/img/users/<%= usuario.imagen %>" alt="Imagen de perfil">
                    
                  </div>
                  <div class="media-body">
                    <ul class="user-profile-list">
                      <li><span>Nombre completo:</span><%= usuario.nombre %> <%= usuario.apellido %> </li>
                      <li><span>Email:</span> <%= usuario.email %></li>
                      <li><span>Teléfono:</span> <%= usuario.telefono ? usuario.telefono : null %></li>
                      <li><span>Fecha de nacimiento:</span> <%= usuario.fechaDeNacimiento %></li>
                    </ul>
                  </div>
                  <div class="edit-profile">
                    
                    <form class="profile" action="/user/userProfile/<%= usuario.id %>?_method=PUT" method="POST" enctype="multipart/form-data">
                        
                        
                        <span>Nombre: </span>
                        <div class="inputs">
                          <input type="text" id="nombre" name="nombre" class="edit-form" value="<%= usuario.nombre %>">
                          <i class="error fas fa-times" id="errorNombre"></i>
                          <i class="check fas fa-check" id="checkNombre"></i>
                        </div>
                        <% if (locals.errors && errors.nombre) { %>
                          <small class="errors"><%= errors.nombre.msg %> </small>
                       
                        <% } %>
                        <small id="smallNombre" class="errors"></small>
                        

                        <span>Apellido: </span>
                        <div class="inputs">
                          <input type="text"id="apellido" name="apellido" class="edit-form" value="<%= usuario.apellido %>">
                          <i class="error fas fa-times" id="errorApellido"></i>
                          <i class="check fas fa-check" id="checkApellido"></i>
                        </div>
                        <% if (locals.errors && errors.apellido) { %>
                          <small class="errors"><%= errors.apellido.msg %> </small>
                       
                        <% } %>
                        <small id="smallApellido" class="errors"></small>
                        
                        <span>Nombre de usuario: </span>
                        <div class="inputs">
                          <input type="text"id="userName" name="userName" class="edit-form" value="<%= usuario.userName %>">
                          <i class="error fas fa-times" id="errorUserName"></i>
                          <i class="check fas fa-check" id="checkUserName"></i>
                        </div>
                        <% if (locals.errors && errors.userName) { %>
                          <small class="errors"><%= errors.userName.msg %> </small>
                       
                        <% } %>
                        <small id="smallUserName" class="errors"></small>

                        <span>Email: </span>
                        <div class="inputs">
                          <input type="email" id="email" name="email" class="edit-form" value="<%= usuario.email %>">
                          <i class="error fas fa-times" id="errorEmail"></i>
                          <i class="check fas fa-check" id="checkEmail"></i>
                        </div>
                        <% if (locals.errors && errors.email) { %>
                          <small  class="errors"><%= errors.email.msg %> </small>
                       
                        <% } %>
                        <small id="smallEmail" class="errors"></small>
                        
                        <span>Teléfono: </span>
                        <div class="inputs">
                          <input type="number" id="telefono" name="telefono" class="edit-form" value="<%= usuario.telefono ? usuario.telefono : null %>">
                          <i class="error fas fa-times" id="errorTelefono"></i>
                          <i class="check fas fa-check" id="checkTelefono"></i>
                        </div>
                        <% if (locals.errors && errors.telefono) { %>
                          <small class="errors"><%= errors.telefono.msg %> </small>
                       
                        <% } %>
                        <small id="smallTelefono" class="errors"></small>

                        <span>Imagen de perfil: </span>
                        <div class="inputs">
                          <input type="file" id="imagen" accept="image/*" name="avatar" >
                        </div>
                        <% if (locals.errors && errors.imagen) { %>
                          <small class="errors"><%= errors.imagen.msg %> </small>
                      
                        <% } %>
                        <small id="smallImagen" class="errors"></small>
                        
                        <div>
                          <button class="edit-button" type="submit">Guardar cambios</button>
                          
                          <button class="cancel-button" type="reset">Cancelar</button>
                        </div>

                    </form>

                    <a href="/user/password" class="redirect">Cambiar contraseña <i class="fas fa-edit"></i></a>


                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </section>


    <!-- compras -->

    <section class=" profile-section user-dashboard page-wrapper">
        <div class="container">
            <h4>Mis compras</h4>
            <div class="row">
                <div class="col-md-12">
                    
                    <div class="dashboard-wrapper user-dashboard">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>ID de compra</th>
                                        <th>Fecha</th>
                                        <th>Items</th>
                                        <th>Total</th>
                                        <th>Estado</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>#451231</td>
                                        <td>Mar 25, 2016</td>
                                        <td>2</td>
                                        <td>$99.00</td>
                                        <td><span class="label label-primary">Processing</span></td>
                                        <td><a href="order.html" class="btn btn-default">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>#451231</td>
                                        <td>Mar 25, 2016</td>
                                        <td>3</td>
                                        <td>$150.00</td>
                                        <td><span class="label label-success">Completed</span></td>
                                        <td><a href="order.html" class="btn btn-default">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>#451231</td>
                                        <td>Mar 25, 2016</td>
                                        <td>3</td>
                                        <td>$150.00</td>
                                        <td><span class="label label-danger">Canceled</span></td>
                                        <td><a href="order.html" class="btn btn-default">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>#451231</td>
                                        <td>Mar 25, 2016</td>
                                        <td>2</td>
                                        <td>$99.00</td>
                                        <td><span class="label label-info">On Hold</span></td>
                                        <td><a href="order.html" class="btn btn-default">View</a></td>
                                    </tr>
                                    <tr>
                                        <td>#451231</td>
                                        <td>Mar 25, 2016</td>
                                        <td>3</td>
                                        <td>$150.00</td>
                                        <td><span class="label label-warning">Pending</span></td>
                                        <td><a href="order.html" class="btn btn-default">View</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Direcciones -->

    <section class="profile-section user-dashboard page-wrapper">
        <div class="container">
            <h4>Mis Direcciones</h4>
          <div class="row">
            <div class="col-md-12">
              
              <div class="dashboard-wrapper user-dashboard">
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        
                        <th>Calle</th>
                        <th>Número</th>
                        <th>Localidad</th>
                        <th>Provincia</th>
                        <th>Código Postal</th>
                        
                        
                        <th>Editar</th>
                        <th>Eliminar</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% for(i=0; i < usuario.direccion.length; i++){ %>
                       
                      <tr>
                       
                        <td> <%= usuario.direccion[i].calle %>  </td>
                        <td> <%= usuario.direccion[i].numero %></td>
                        <td> <%= usuario.direccion[i].localidad %></td>
                        <td> <%= usuario.direccion[i].provincia %></td>
                        <td> <%= usuario.direccion[i].codigoPostal %></td>
                        
                        
                        <td class="iconos"><a href="/user/address/edit/<%= usuario.direccion[i].id %>"><i class="fas fa-wrench"></i></a></td>
                        <td class="iconos">
                          <form class="address" action="/user/address/delete/<%= usuario.direccion[i].id %>?_method=DELETE" method="POST">
                            <button  type="submit">
                              <i class=" trash fas fa-trash-alt">

                              </i>
                            </button>
                          </form>
                        </td>
                         
                        
                      </tr>
                      <% } %>  
                      
                    </tbody>
                  </table>
                  <a href="/user/address/add" class="redirect">Agregar nueva dirección <i class="fas fa-plus-square"></i></a> 
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

    
    
</main>


<!-- ////////// -->
    <%- include('../partials/footer')  %> 
</body>
<script src="../../../js/userProfile.js"></script>
</html>